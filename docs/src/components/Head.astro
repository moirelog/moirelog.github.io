---
import StarlightHead from '@astrojs/starlight/components/Head.astro';
import { ClientRouter } from 'astro:transitions';

const props = Astro.props;
---

<StarlightHead {...props} />
<ClientRouter />

<script>
  // Persist sidebar scroll position across page navigations
  function persistSidebarScroll() {
    const sidebar = document.querySelector('.sidebar');
    if (!sidebar) return;

    // Restore scroll position
    const savedPosition = sessionStorage.getItem('sidebar-scroll-y');
    if (savedPosition) {
      sidebar.scrollTop = parseInt(savedPosition, 10);
    }

    // Save scroll position
    sidebar.addEventListener('scroll', () => {
      sessionStorage.setItem('sidebar-scroll-y', sidebar.scrollTop.toString());
    }, { passive: true });
  }

  // Run on initial load and view transitions
  document.addEventListener('astro:page-load', persistSidebarScroll);
</script>


