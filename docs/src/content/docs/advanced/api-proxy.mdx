---
title: API åŠ é€Ÿ
description: ä¸ºä¸­å›½å¤§é™†ç”¨æˆ·é…ç½® GitHub API ä»£ç†
---

import { Steps, LinkButton } from '@astrojs/starlight/components';

å¦‚æœä½ åœ¨ä¸­å›½å¤§é™†ï¼Œè®¿é—® GitHub API å¯èƒ½ä¼šé‡åˆ°é€Ÿåº¦æ…¢æˆ–è¿æ¥å¤±è´¥çš„é—®é¢˜ã€‚æœ¬ç« ä»‹ç»å¦‚ä½•ä½¿ç”¨ Cloudflare Workers æ­å»ºä»£ç†ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦ä»£ç†ï¼Ÿ

å¿«æ·æŒ‡ä»¤éœ€è¦è°ƒç”¨ GitHub API æ¥ä¸Šä¼ ç¬”è®°ï¼Œä½†åœ¨æŸäº›ç½‘ç»œç¯å¢ƒä¸‹ï¼š

- âš ï¸ è¯·æ±‚è¶…æ—¶
- ğŸŒ é€Ÿåº¦ææ…¢
- âŒ è¿æ¥å¤±è´¥

é€šè¿‡ Cloudflare Workers ä»£ç†ï¼Œå¯ä»¥å¤§å¹…æå‡é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚

## éƒ¨ç½² Cloudflare Workers

### å‰ç½®è¦æ±‚

- Cloudflare è´¦å·ï¼ˆå…è´¹ï¼‰
- åŸŸåï¼ˆå¯é€‰ï¼ŒCloudflare æä¾›å…è´¹å­åŸŸåï¼‰

### å¿«é€Ÿéƒ¨ç½²

æˆ‘ä»¬æä¾›äº†ä¸€é”®éƒ¨ç½²æŒ‰é’®ï¼š

<LinkButton href="https://deploy.workers.cloudflare.com/?url=https://github.com/moirelog/github-api-proxy" variant="primary" icon="rocket">
  ä¸€é”®éƒ¨ç½²åˆ° Cloudflare Workers
</LinkButton>

### æ‰‹åŠ¨éƒ¨ç½²

å¦‚æœä¸€é”®éƒ¨ç½²ä¸å¯ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨éƒ¨ç½²ï¼š

<Steps>

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)

2. è¿›å…¥ **Workers & Pages**

3. ç‚¹å‡» **Create application** â†’ **Create Worker**

4. ç»™ Worker å‘½åï¼ˆå¦‚ `github-api-proxy`ï¼‰

5. ç‚¹å‡» **Deploy**

6. éƒ¨ç½²åï¼Œç‚¹å‡» **Edit code**

7. ç²˜è´´ä»¥ä¸‹ä»£ç ï¼š

```javascript
export default {
  async fetch(request) {
    const url = new URL(request.url);
    
    // å°†è¯·æ±‚è½¬å‘åˆ° GitHub API
    const githubUrl = `https://api.github.com${url.pathname}${url.search}`;
    
    const githubRequest = new Request(githubUrl, {
      method: request.method,
      headers: request.headers,
      body: request.body,
    });
    
    return await fetch(githubRequest);
  }
}
```

8. ç‚¹å‡» **Save and Deploy**

</Steps>

### è·å– Worker URL

éƒ¨ç½²æˆåŠŸåï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª URLï¼š

```
https://github-api-proxy.YOUR_SUBDOMAIN.workers.dev
```

å¤åˆ¶è¿™ä¸ª URLï¼Œç¨åä¼šç”¨åˆ°ã€‚

## é…ç½®å¿«æ·æŒ‡ä»¤

ç°åœ¨éœ€è¦ä¿®æ”¹ Moire Configï¼Œè®©å®ƒä½¿ç”¨ä½ çš„ä»£ç†ã€‚

<Steps>

1. æ‰“å¼€ã€Œå¿«æ·æŒ‡ä»¤ã€App

2. æ‰¾åˆ° **Moire Config**

3. ç‚¹å‡»å³ä¸Šè§’çš„ **...** â†’ **ç¼–è¾‘**

4. æ‰¾åˆ° **API Base URL** å˜é‡ï¼ˆé€šå¸¸åœ¨é¡¶éƒ¨ï¼‰

5. å°†é»˜è®¤å€¼ `https://api.github.com` æ”¹ä¸ºä½ çš„ Worker URLï¼š
   ```
   https://github-api-proxy.YOUR_SUBDOMAIN.workers.dev
   ```

6. ç‚¹å‡» **å®Œæˆ**

7. é‡æ–°è¿è¡Œä¸€æ¬¡ **Moire Config** æ¥ä¿å­˜é…ç½®

</Steps>

## æµ‹è¯•ä»£ç†

é…ç½®å®Œæˆåï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š

1. åœ¨å¤‡å¿˜å½• Moire æ–‡ä»¶å¤¹å†™ä¸€ç¯‡æµ‹è¯•ç¬”è®°
2. å…³é—­å¤‡å¿˜å½•è§¦å‘åŒæ­¥
3. å¦‚æœæˆåŠŸï¼Œè¯´æ˜ä»£ç†å·¥ä½œæ­£å¸¸ âœ…

## æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | ç›´è¿ GitHub API | ä½¿ç”¨ CF Workers |
|------|----------------|-----------------|
| å›½å¤– | å¿«é€Ÿ âš¡ | å¿«é€Ÿ âš¡ |
| å›½å†…ï¼ˆæœ‰å¢™ï¼‰ | å¾ˆæ…¢/å¤±è´¥ ğŸŒ | å¿«é€Ÿ âš¡ |
| å›½å†…ï¼ˆæ— å¢™ï¼‰ | ä¸­ç­‰ | å¿«é€Ÿ âš¡ |

:::tip[æ¨èæ‰€æœ‰å›½å†…ç”¨æˆ·ä½¿ç”¨]
å³ä½¿ä½ çš„ç½‘ç»œå¯ä»¥è®¿é—® GitHubï¼Œä½¿ç”¨ Workers ä»£ç†ä»ç„¶èƒ½æå‡é€Ÿåº¦ã€‚
:::

## å®‰å…¨æ€§è¯´æ˜

### ä»£ç å¼€æº

Workers ä»£ç å®Œå…¨å¼€æºï¼Œä½ å¯ä»¥å®¡æŸ¥ï¼š
- [GitHub ä»“åº“](https://github.com/moirelog/github-api-proxy)

### éšç§ä¿æŠ¤

Workers åªæ˜¯è½¬å‘è¯·æ±‚ï¼Œ**ä¸ä¼š**ï¼š
- âŒ è®°å½•æ—¥å¿—
- âŒ å­˜å‚¨ Token
- âŒ ä¿®æ”¹è¯·æ±‚å†…å®¹

### è‡ªæ‰˜ç®¡

å¦‚æœä¸ä¿¡ä»»æˆ‘ä»¬çš„ä»£ç ï¼Œä½ å¯ä»¥ï¼š
1. å®¡æŸ¥æºç 
2. éƒ¨ç½²è‡ªå·±çš„ Worker
3. å®Œå…¨æŒæ§

## æ•…éšœæ’æŸ¥

### Workers éƒ¨ç½²å¤±è´¥ï¼Ÿ

- ç¡®ä¿ Cloudflare è´¦å·å·²éªŒè¯é‚®ç®±
- å…è´¹è®¡åˆ’æœ‰æ¯æ—¥ 100,000 è¯·æ±‚é™åˆ¶ï¼ˆå¯¹ä¸ªäººåšå®¢å®Œå…¨å¤Ÿç”¨ï¼‰

### å¿«æ·æŒ‡ä»¤ä»ç„¶å¤±è´¥ï¼Ÿ

- æ£€æŸ¥ API Base URL æ˜¯å¦æ­£ç¡®å¡«å†™
- ç¡®ä¿ URL æ²¡æœ‰å¤šä½™çš„ `/` ç»“å°¾
- å°è¯•åœ¨æµè§ˆå™¨è®¿é—® Worker URLï¼Œçœ‹æ˜¯å¦è¿”å› 404ï¼ˆæ­£å¸¸ï¼‰

## ä¸‹ä¸€æ­¥

å¦‚æœä½ æƒ³ä½¿ç”¨è‡ªå®šä¹‰åŸŸåå±•ç¤ºåšå®¢ã€‚

import { LinkCard } from '@astrojs/starlight/components';

<LinkCard
  title="è‡ªå®šä¹‰åŸŸå"
  description="ç»‘å®šä½ è‡ªå·±çš„åŸŸå"
  href="/advanced/custom-domain/"
/>
